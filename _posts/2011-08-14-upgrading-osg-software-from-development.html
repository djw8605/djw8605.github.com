---
title: Upgrading OSG Software from Development to Testing
date: '2011-08-14T13:27:00.000-05:00'
author: Derek Weitzel
tags:
- osg
modified_time: '2011-08-14T13:27:02.495-05:00'
blogger_id: tag:blogger.com,1999:blog-3007054864987759910.post-8252597348075145848
blogger_orig_url: http://derekweitzel.blogspot.com/2011/08/upgrading-osg-software-from-development.html
---

In the OSG-software team, there has been a lot of discussion when the right time to upgrade packages to testing from the developer playground. &nbsp;I'm not going to go into the discussion much, other than it should be tracked in <a href="https://jira.opensciencegrid.org/">Jira</a>.<br /><br />I'm going to go through my process (as I do it) of upgrading the osg-wn-client from development to testing.<br /><br />Check Jira for tickets by component. &nbsp;For the osg-wn-client, I look at:&nbsp;<a href="https://jira.opensciencegrid.org/browse/SOFTWARE/component/10022#atl_token=BW0Y-Z80A-TAVN-JX0Y|26a846df94de7304c4d9cfcedfe5fac71ad6eb7d|lin&amp;selectedTab=com.atlassian.jira.plugin.system.project%3Acomponent-issues-panel">osg-wn-client</a>:<br /><div><ul><li>Major:&nbsp;<a href="https://jira.opensciencegrid.org/browse/SOFTWARE-30">SOFTWARE-30</a>: Add LSC files to the vomses. &nbsp;This bug has a first draft of the documentation done. &nbsp;It also is not a functional show stopper, rather it only affects the packagers.</li>
 <li>Minor:&nbsp;<a href="https://jira.opensciencegrid.org/browse/SOFTWARE-78">SOFTWARE-78</a>: Pegasus RPM cleanup / FHS. &nbsp;This is a feature request/task really. &nbsp;Though nice to have, it doesn't change the functionality of the package.</li>
 </ul>After the bugs have been reviewed, (only 2), and especially since there are no 'blocker' bugs, we start the koji work. &nbsp;First, I look at the&nbsp;<a href="https://koji-hub.batlab.org/koji/buildinfo?buildID=196">osg-wn-client</a> meta package. &nbsp;I will upgrade the <a href="https://koji-hub.batlab.org/koji/rpminfo?rpmID=2110">dependencies</a> before upgrading the metapackage. &nbsp;For each package in the the dependencies (some are from EPEL, so I don't need to do anything), I will go to the package's koji page, looking for the name of the latest build (or latest tested build). &nbsp;The koji command is similiar to:</div><div><pre>koji tag-pkg el5-osg-testing bestman2-2.1.1-5</pre><br /></div><div>It's important to note that these are just the first level dependencies of the osg-wn-client. &nbsp;I will also need add packages that are dependencies of the dependencies such as the jdk (srm clients).<br /><br />Once you have tagged all the builds that are dependencies of osg-wn-client, you can upgrade the meta-package. &nbsp;Then it's time to pull out the VM. &nbsp;I need to test the install, see if I caught all the packages. &nbsp;Since we're upgrading so many packages all at once (likely a one time thing), we need to test the install along the way. <br /><br />Luckily, I have mash running on a local server, so I can just execute mash to pull the latest from the testing repo. &nbsp;If you want my mash configs, they're on github:&nbsp;<a href="https://github.com/djw8605/osg-mash">https://github.com/djw8605/osg-mash</a>. &nbsp;I needed to edit the /etc/yum.repos.d/osg-testing.repo file in the VM in order to point to my local mash repo.<br /><br />I did have missing dependencies: gfal,&nbsp;libglite_data_delegation_api_simple_c.so,&nbsp;libglite_data_util.so.0, libglite-sd-c.so.2,&nbsp;vdt-ca-certs. &nbsp;Another iteration (after yum clean all)... Missing&nbsp;libglite_data_delegation_api_simple_c. &nbsp;Another iteration... success!<br /><br />To find what package provides what library, I just use the web interface, clicking on the RPM's info, to find what the package Provides. &nbsp;I'm sure there is a clever yum command to do most of this for me, but this didn't take me much time anyways.<br /><br />So, we now have a osg-wn-client in the osg-testing repo. &nbsp;Stay tuned next week for the upgrading of the osg-client. &nbsp;Just need to resolve the <a href="https://jira.opensciencegrid.org/browse/SOFTWARE-146">blocker ticket</a> for the osg-client.<br /><br /><br /><br /></div><blockquote></blockquote>
