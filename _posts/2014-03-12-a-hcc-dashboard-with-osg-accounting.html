---
title: A HCC Dashboard with OSG Accounting
date: '2014-03-12T12:48:00.002-05:00'
author: Derek Weitzel
tags:
- hcc
- osg
modified_time: '2014-07-11T10:11:57.733-05:00'
thumbnail: http://1.bp.blogspot.com/-0W7W70gVyTM/UyCa2PjC12I/AAAAAAAACPY/rQFZoK9J_N0/s72-c/vizscreenshot2.png
blogger_id: tag:blogger.com,1999:blog-3007054864987759910.post-8735144556289135330
blogger_orig_url: http://derekweitzel.blogspot.com/2014/03/a-hcc-dashboard-with-osg-accounting.html
---

After the <a href="http://sc13.supercomputing.org/">2013 SuperComputing Conference</a>, we found ourselves with a extra monitor at <a href="http://hcc.unl.edu/">HCC</a>. &nbsp;Therefore, I set about creating a dashboard which can show the current status of HCC.<br /><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-0W7W70gVyTM/UyCa2PjC12I/AAAAAAAACPY/rQFZoK9J_N0/s1600/vizscreenshot2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-0W7W70gVyTM/UyCa2PjC12I/AAAAAAAACPY/rQFZoK9J_N0/s1600/vizscreenshot2.png" height="354" width="640" /></a></div><h3>Creating the Dashboard</h3><div>I have an interest in data visualization, and follow many blogs that show off new methods. &nbsp;On one occasion, I saw <a href="http://shopify.github.io/dashing/">Dashing</a> mentioned.</div><div><br /></div><div>Dashing is a dashboard framework made by <a href="http://www.shopify.com/">Shopify</a> for their own use, and released as open source. &nbsp;It is mostly written in <a href="https://www.ruby-lang.org/en/">Ruby</a> and <a href="http://coffeescript.org/">CoffeeScript</a> (a higher level javascript, if you can imagine). &nbsp;It has a concept of jobs which fetch data and forward the data to the framework. &nbsp;The data is sent to clients viewing the dashboard, where it is parsed by the Coffeescript and modeled with a combination of data bindings from <a href="http://batmanjs.org/">batman.js</a>, CSS with <a href="http://sass-lang.com/">SCSS</a>, and plain old HTML.</div><div><br /></div><div>I wrote several <a href="https://github.com/djw8605/HCCDashboard/tree/master/jobs">jobs</a>&nbsp;to retrieve data from numerous sources. &nbsp;Most of the information is from HCC's local instance of OSG's <a href="http://sourceforge.net/projects/gratia/">Gratia</a> accounting system. &nbsp;The HCC Dashboard uses our gratia system for:</div><div><ul><li>How many CPU hours where consumed on our resources.</li><li>Current usage by User (http://hcc.unl.edu//gratia/)</li></ul>The job to retrieve the top user's also communicates with HCC's user database to retrieve college and department information. &nbsp;The storage meters use an external probe on the clusters to periodically report the used storage space of our filesystems.<br /><br />Each box is an instances of a <a href="https://github.com/djw8605/HCCDashboard/tree/master/widgets">widget</a>. &nbsp;A widget is a combination of HTML, SCSS, and CoffeeScript that are used to parse and present the data.<br /><h3>Current Dashboard Design</h3></div><div>Most of the information on the dashboard is in the form of monitoring. &nbsp;The current number of cores used on our resources and the top users widgets use Gratia monitoring information. &nbsp;The networking graph uses Ganglia.</div><div><br /></div><div>We also include a "Hourly Price on Amazon EC2" widget. &nbsp;This combines the computing, storage, and networking costs (extrapolated from current values), and displays an expected price per hour on Amazon. &nbsp;The computing is easily the most expensive component.</div><h3>Who Uses it?</h3><div>HCC uses it to display the current status of our computing center. &nbsp;It is useful to see if anything is working incorrectly. &nbsp;For example, we where able to spot problems on one of our clusters when the number of running cores decreased significantly, which was caused by the scheduler draining off a significant portion of the cluster in order for a single user to run a toy job.</div><div><br /></div><div>The top users is also interesting for HCC researchers when the come into the offices. &nbsp;They are able to see their own usernames on the big display, prominently displayed.</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-cPlW_KyFnEo/UyCddsR224I/AAAAAAAACPo/Yv4EEZu5wg8/s1600/2014-03-12+12.44.25.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-cPlW_KyFnEo/UyCddsR224I/AAAAAAAACPo/Yv4EEZu5wg8/s1600/2014-03-12+12.44.25.jpg" height="480" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Growing collection of visualizations</td></tr></tbody></table><h3>More Information</h3><div>The source for the dashboard is available on <a href="https://github.com/djw8605/HCCDashboard">Github</a>. &nbsp;Also, the live instance of the dashboard is available <a href="http://viz.unl.edu:3030/hcc">here</a>.</div>
